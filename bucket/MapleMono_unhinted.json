{
    "version": "7.5",
    "license": "OFL-1.1",
    "homepage": "https://github.com/subframe7536/maple-font",
    "url": [
        "https://github.com/subframe7536/maple-font/releases/download/v7.5/MapleMono-TTF.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.5/MapleMonoNL-TTF.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.5/MapleMonoNormal-TTF.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.5/MapleMonoNormalNL-TTF.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.5/MapleMono-NF-unhinted.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.5/MapleMonoNL-NF-unhinted.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.5/MapleMonoNormal-NF-unhinted.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.5/MapleMonoNormalNL-NF-unhinted.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.5/MapleMono-CN-unhinted.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.5/MapleMonoNL-CN-unhinted.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.5/MapleMonoNormal-CN-unhinted.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.5/MapleMonoNormalNL-CN-unhinted.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.5/MapleMono-NF-CN-unhinted.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.5/MapleMonoNL-NF-CN-unhinted.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.5/MapleMonoNormal-NF-CN-unhinted.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.5/MapleMonoNormalNL-NF-CN-unhinted.zip"
    ],
    "hash": [
        "495b9a8691f4a041dd378a318b6d57f819ac86751d3f599c6937a38bce6fdcbc",
        "755c5f8d55ee99ec735adf571fd5cce5649a46653e2fcd707e219b4dff24fcee",
        "9b7d07b5645a82ae4cea1797a1d2530ab4fdfb82b3fa6914bfa33ac70f31494d",
        "c41ef7fcc1e2284c67f861c87b38e4da6b1d93dc7e34850cf6f26b2678636056",
        "2d496c8a5ac02daf3477d9a10e193c694489e9fa8d26193628b51086d5ee07a4",
        "08ba3ebbd5d13eba488c425f777884e0ccb7c98bce00a1cadd2176370cf50309",
        "72591bd191ae67c3a1d6991d7bcba6bf4ea42d9fedf4e95afd51b44abb7dd1f2",
        "cd23ca6864d996b0a07cc9eb6817fc206e103209a67f93165c870b26cc5472ad",
        "49fc3a94aa07f3c0441cb3115be876880c9d69ea6a8a5b72f41f97be9a3b598e",
        "32327589f35a7ec9586ee38d27c3642f65ffcd9968598b1b74275ea7a709bae6",
        "6ee1638126b1d4064dc1db31abbcc2e25297c3fb5b79b9ea213c7f234846f9a8",
        "594be01a45bd0b78d280e49fb22f13f053c3a446bd1614b38a211d2e4dd60e0a",
        "3bd076e9e0a0cd48397fe836abe4c299c34245a0c4ee043c5653159626f3e085",
        "7af34b409972d034e11d3d38a7d7fee732ffe1d3bae1ea13c6507e0833ca56b5",
        "d3eee9ae7b04fb70c8f035435a580605320aa533e876bda67916b66f6c736a7e",
        "034326fde392ab4a90001694fbf1eeef7656c2c96f7822fb833e3e54cfeffac5"
    ],
    "installer": {
        "script": [
            "$currentBuildNumber = [int] (Get-ItemProperty \"HKLM:\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\").CurrentBuildNumber",
            "$windows10Version1809BuildNumber = 17763",
            "$isPerUserFontInstallationSupported = $currentBuildNumber -ge $windows10Version1809BuildNumber",
            "if (!$isPerUserFontInstallationSupported -and !$global) {",
            "    scoop uninstall $app",
            "    Write-Host \"\"",
            "    Write-Host \"For Windows version before Windows 10 Version 1809 (OS Build 17763),\" -Foreground DarkRed",
            "    Write-Host \"Font can only be installed for all users.\" -Foreground DarkRed",
            "    Write-Host \"\"",
            "    Write-Host \"Please use following commands to install '$app' Font for all users.\" -Foreground DarkRed",
            "    Write-Host \"\"",
            "    Write-Host \"        scoop install sudo\"",
            "    Write-Host \"        sudo scoop install -g $app\"",
            "    Write-Host \"\"",
            "    exit 1",
            "}",
            "$fontInstallDir = if ($global) { \"$env:windir\\Fonts\" } else { \"$env:LOCALAPPDATA\\Microsoft\\Windows\\Fonts\" }",
            "if (-not $global) {",
            "    # Ensure user font install directory exists and has correct permission settings",
            "    # See https://github.com/matthewjberger/scoop-nerd-fonts/issues/198#issuecomment-1488996737",
            "    New-Item $fontInstallDir -ItemType Directory -ErrorAction SilentlyContinue | Out-Null",
            "    $accessControlList = Get-Acl $fontInstallDir",
            "    $allApplicationPackagesAccessRule = New-Object System.Security.AccessControl.FileSystemAccessRule([System.Security.Principal.SecurityIdentifier]::new(\"S-1-15-2-1\"), \"ReadAndExecute\", \"ContainerInherit,ObjectInherit\", \"None\", \"Allow\")",
            "    $allRestrictedApplicationPackagesAccessRule = New-Object System.Security.AccessControl.FileSystemAccessRule([System.Security.Principal.SecurityIdentifier]::new(\"S-1-15-2-2\"), \"ReadAndExecute\", \"ContainerInherit,ObjectInherit\", \"None\", \"Allow\")",
            "    $accessControlList.SetAccessRule($allApplicationPackagesAccessRule)",
            "    $accessControlList.SetAccessRule($allRestrictedApplicationPackagesAccessRule)",
            "    Set-Acl -AclObject $accessControlList $fontInstallDir",
            "}",
            "$registryRoot = if ($global) { \"HKLM\" } else { \"HKCU\" }",
            "$registryKey = \"${registryRoot}:\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Fonts\"",
            "Get-ChildItem $dir -Include '*.ttf','*.ttc' -Recurse | ForEach-Object {",
            "    $value = if ($global) { $_.Name } else { \"$fontInstallDir\\$($_.Name)\" }",
            "    New-ItemProperty -Path $registryKey -Name $_.Name.Replace($_.Extension, ' (TrueType)') -Value $value -Force | Out-Null",
            "    Copy-Item -LiteralPath $_.FullName -Destination $fontInstallDir",
            "}"
        ]
    },
    "pre_uninstall": [
        "$fontInstallDir = if ($global) { \"$env:windir\\Fonts\" } else { \"$env:LOCALAPPDATA\\Microsoft\\Windows\\Fonts\" }",
        "Get-ChildItem $dir -Include '*.ttf','*.ttc' -Recurse | ForEach-Object {",
        "    Get-ChildItem $fontInstallDir -Filter $_.Name | ForEach-Object {",
        "        try {",
        "            Rename-Item $_.FullName $_.FullName -ErrorVariable LockError -ErrorAction Stop",
        "        } catch {",
        "            Write-Host \"\"",
        "            Write-Host \" Error \" -Background DarkRed -Foreground White -NoNewline",
        "            Write-Host \"\"",
        "            Write-Host \" Cannot uninstall '$app' font.\" -Foreground DarkRed",
        "            Write-Host \"\"",
        "            Write-Host \" Reason \" -Background DarkCyan -Foreground White -NoNewline",
        "            Write-Host \"\"",
        "            Write-Host \" The '$app' font is currently being used by another application,\" -Foreground DarkCyan",
        "            Write-Host \" so it cannot be deleted.\" -Foreground DarkCyan",
        "            Write-Host \"\"",
        "            Write-Host \" Suggestion \" -Background Magenta -Foreground White -NoNewline",
        "            Write-Host \"\"",
        "            Write-Host \" Close all applications that are using '$app' font (e.g. vscode),\" -Foreground Magenta",
        "            Write-Host \" and then try again.\" -Foreground Magenta",
        "            Write-Host \"\"",
        "            exit 1",
        "        }",
        "    }",
        "}"
    ],
    "uninstaller": {
        "script": [
            "$fontInstallDir = if ($global) { \"$env:windir\\Fonts\" } else { \"$env:LOCALAPPDATA\\Microsoft\\Windows\\Fonts\" }",
            "$registryRoot = if ($global) { \"HKLM\" } else { \"HKCU\" }",
            "$registryKey = \"${registryRoot}:\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Fonts\"",
            "Get-ChildItem $dir -Include '*.ttf','*.ttc' -Recurse | ForEach-Object {",
            "    Remove-ItemProperty -Path $registryKey -Name $_.Name.Replace($_.Extension, ' (TrueType)') -Force -ErrorAction SilentlyContinue",
            "    Remove-Item \"$fontInstallDir\\$($_.Name)\" -Force -ErrorAction SilentlyContinue",
            "}",
            "if ($cmd -eq \"uninstall\") {",
            "    Write-Host \"The 'ToneOZ Pinyin Kai' Font family has been uninstalled and will not be present after restarting your computer.\" -Foreground Magenta",
            "}"
        ]
    },
    "checkver": {
        "url": "https://api.github.com/repos/subframe7536/maple-font/releases/latest",
        "jsonpath": "$.tag_name",
        "regex": "v([\\d\\w-\\.]+)"
    },
    "autoupdate": {
        "url": [
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMono-TTF.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMonoNL-TTF.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMonoNormal-TTF.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMonoNormalNL-TTF.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMono-NF-unhinted.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMonoNL-NF-unhinted.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMonoNormal-NF-unhinted.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMonoNormalNL-NF-unhinted.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMono-CN-unhinted.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMonoNL-CN-unhinted.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMonoNormal-CN-unhinted.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMonoNormalNL-CN-unhinted.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMono-NF-CN-unhinted.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMonoNL-NF-CN-unhinted.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMonoNormal-NF-CN-unhinted.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMonoNormalNL-NF-CN-unhinted.zip"
        ]
    }
}
