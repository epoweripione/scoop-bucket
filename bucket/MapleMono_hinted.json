{
    "version": "7.0-beta33",
    "license": "OFL-1.1",
    "homepage": "https://github.com/subframe7536/maple-font",
    "url": [
        "https://github.com/subframe7536/maple-font/releases/download/v7.0-beta33/MapleMono-TTF-AutoHint.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.0-beta33/MapleMonoNL-TTF-AutoHint.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.0-beta33/MapleMonoNormal-TTF-AutoHint.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.0-beta33/MapleMonoNormalNL-TTF-AutoHint.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.0-beta33/MapleMono-NF.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.0-beta33/MapleMonoNL-NF.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.0-beta33/MapleMonoNormal-NF.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.0-beta33/MapleMonoNormalNL-NF.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.0-beta33/MapleMono-CN.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.0-beta33/MapleMonoNL-CN.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.0-beta33/MapleMonoNormal-CN.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.0-beta33/MapleMonoNormalNL-CN.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.0-beta33/MapleMono-NF-CN.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.0-beta33/MapleMonoNL-NF-CN.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.0-beta33/MapleMonoNormal-NF-CN.zip",
        "https://github.com/subframe7536/maple-font/releases/download/v7.0-beta33/MapleMonoNormalNL-NF-CN.zip"
    ],
    "hash": [
        "917e2cd6f2fc876425a4d4de07375f15258b2ebb3e8471bbe344b27ade40c3be",
        "c5e376fd02c7641dd057007fe02767d5e6e89628a523a24bd1e9c75a1b91375b",
        "49c30c97069c7a5e5e5d098fb523aa908e4d670dbad966f9402dc45cf341ac3c",
        "5b742c1adb7d3754c6718922fc7486eb183e44018bf51d4a48d6fec060df14f5",
        "8c235c4a46bc71034c546dfaaa30368c929ffb6f1a698394aecf3b4cdc22fbdb",
        "f8dc6d1ee3415188e4b0f88a7f0aae029effcbf736b6f7ee0ee9ba34016a8b86",
        "86972565dc0b73170881221a5f236754cfdb04f4a789164b38dd3b8ca41bae59",
        "eab2548ecaca4fa3194146e61f885af4a3e06a05aa92e58a42fc99cc22ab5dbe",
        "5b07bf6ab31651f8f8018b4fbcb3d91fa330dfd6889ae519efe8a474cbbba0d7",
        "9f104b37267dd7e18e314c0a968f9242458e5fb98a3c0e2cb3151702c15b2cff",
        "3de2a53c8d6927eb6cdd8f570b155d275be729ee4f821b4674db84c1637a78ae",
        "7d1310b1547fc3c874b59963cc45346df6e107b2b4d09334e610d13b6fd28bba",
        "44f176454155bcb132ef756aa191930207a602ae7ba9046d0b260d1490f7bc58",
        "59f15b1238fa89a5ec34c1b02b36ac3678630a41faae8be4eb4d8f7f30dfa42e",
        "7686a633d8fd68faba3153820391ff516a38d70ed8ad63f911e04d9f96a59fbf",
        "e269f087cb5e627d5d06e98dd2570d9c350d4abdd2b496ade17d53466bd3e5c3"
    ],
    "installer": {
        "script": [
            "$currentBuildNumber = [int] (Get-ItemProperty \"HKLM:\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\").CurrentBuildNumber",
            "$windows10Version1809BuildNumber = 17763",
            "$isPerUserFontInstallationSupported = $currentBuildNumber -ge $windows10Version1809BuildNumber",
            "if (!$isPerUserFontInstallationSupported -and !$global) {",
            "    scoop uninstall $app",
            "    Write-Host \"\"",
            "    Write-Host \"For Windows version before Windows 10 Version 1809 (OS Build 17763),\" -Foreground DarkRed",
            "    Write-Host \"Font can only be installed for all users.\" -Foreground DarkRed",
            "    Write-Host \"\"",
            "    Write-Host \"Please use following commands to install '$app' Font for all users.\" -Foreground DarkRed",
            "    Write-Host \"\"",
            "    Write-Host \"        scoop install sudo\"",
            "    Write-Host \"        sudo scoop install -g $app\"",
            "    Write-Host \"\"",
            "    exit 1",
            "}",
            "$fontInstallDir = if ($global) { \"$env:windir\\Fonts\" } else { \"$env:LOCALAPPDATA\\Microsoft\\Windows\\Fonts\" }",
            "if (-not $global) {",
            "    # Ensure user font install directory exists and has correct permission settings",
            "    # See https://github.com/matthewjberger/scoop-nerd-fonts/issues/198#issuecomment-1488996737",
            "    New-Item $fontInstallDir -ItemType Directory -ErrorAction SilentlyContinue | Out-Null",
            "    $accessControlList = Get-Acl $fontInstallDir",
            "    $allApplicationPackagesAccessRule = New-Object System.Security.AccessControl.FileSystemAccessRule([System.Security.Principal.SecurityIdentifier]::new(\"S-1-15-2-1\"), \"ReadAndExecute\", \"ContainerInherit,ObjectInherit\", \"None\", \"Allow\")",
            "    $allRestrictedApplicationPackagesAccessRule = New-Object System.Security.AccessControl.FileSystemAccessRule([System.Security.Principal.SecurityIdentifier]::new(\"S-1-15-2-2\"), \"ReadAndExecute\", \"ContainerInherit,ObjectInherit\", \"None\", \"Allow\")",
            "    $accessControlList.SetAccessRule($allApplicationPackagesAccessRule)",
            "    $accessControlList.SetAccessRule($allRestrictedApplicationPackagesAccessRule)",
            "    Set-Acl -AclObject $accessControlList $fontInstallDir",
            "}",
            "$registryRoot = if ($global) { \"HKLM\" } else { \"HKCU\" }",
            "$registryKey = \"${registryRoot}:\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Fonts\"",
            "Get-ChildItem $dir -Include '*.ttf','*.ttc' -Recurse | ForEach-Object {",
            "    $value = if ($global) { $_.Name } else { \"$fontInstallDir\\$($_.Name)\" }",
            "    New-ItemProperty -Path $registryKey -Name $_.Name.Replace($_.Extension, ' (TrueType)') -Value $value -Force | Out-Null",
            "    Copy-Item $_.FullName -Destination $fontInstallDir",
            "}"
        ]
    },
    "pre_uninstall": [
        "$fontInstallDir = if ($global) { \"$env:windir\\Fonts\" } else { \"$env:LOCALAPPDATA\\Microsoft\\Windows\\Fonts\" }",
        "Get-ChildItem $dir -Include '*.ttf','*.ttc' -Recurse | ForEach-Object {",
        "    Get-ChildItem $fontInstallDir -Filter $_.Name | ForEach-Object {",
        "        try {",
        "            Rename-Item $_.FullName $_.FullName -ErrorVariable LockError -ErrorAction Stop",
        "        } catch {",
        "            Write-Host \"\"",
        "            Write-Host \" Error \" -Background DarkRed -Foreground White -NoNewline",
        "            Write-Host \"\"",
        "            Write-Host \" Cannot uninstall '$app' font.\" -Foreground DarkRed",
        "            Write-Host \"\"",
        "            Write-Host \" Reason \" -Background DarkCyan -Foreground White -NoNewline",
        "            Write-Host \"\"",
        "            Write-Host \" The '$app' font is currently being used by another application,\" -Foreground DarkCyan",
        "            Write-Host \" so it cannot be deleted.\" -Foreground DarkCyan",
        "            Write-Host \"\"",
        "            Write-Host \" Suggestion \" -Background Magenta -Foreground White -NoNewline",
        "            Write-Host \"\"",
        "            Write-Host \" Close all applications that are using '$app' font (e.g. vscode),\" -Foreground Magenta",
        "            Write-Host \" and then try again.\" -Foreground Magenta",
        "            Write-Host \"\"",
        "            exit 1",
        "        }",
        "    }",
        "}"
    ],
    "uninstaller": {
        "script": [
            "$fontInstallDir = if ($global) { \"$env:windir\\Fonts\" } else { \"$env:LOCALAPPDATA\\Microsoft\\Windows\\Fonts\" }",
            "$registryRoot = if ($global) { \"HKLM\" } else { \"HKCU\" }",
            "$registryKey = \"${registryRoot}:\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Fonts\"",
            "Get-ChildItem $dir -Include '*.ttf','*.ttc' -Recurse | ForEach-Object {",
            "    Remove-ItemProperty -Path $registryKey -Name $_.Name.Replace($_.Extension, ' (TrueType)') -Force -ErrorAction SilentlyContinue",
            "    Remove-Item \"$fontInstallDir\\$($_.Name)\" -Force -ErrorAction SilentlyContinue",
            "}",
            "if ($cmd -eq \"uninstall\") {",
            "    Write-Host \"The 'ToneOZ Pinyin Kai' Font family has been uninstalled and will not be present after restarting your computer.\" -Foreground Magenta",
            "}"
        ]
    },
    "checkver": {
        "url": "https://api.github.com/repos/subframe7536/maple-font/releases",
        "jsonpath": "$[*].tag_name",
        "regex": "v([\\d\\w-\\.]+)"
    },
    "autoupdate": {
        "url": [
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMono-TTF-AutoHint.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMonoNL-TTF-AutoHint.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMonoNormal-TTF-AutoHint.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMonoNormalNL-TTF-AutoHint.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMono-NF.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMonoNL-NF.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMonoNormal-NF.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMonoNormalNL-NF.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMono-CN.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMonoNL-CN.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMonoNormal-CN.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMonoNormalNL-CN.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMono-NF-CN.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMonoNL-NF-CN.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMonoNormal-NF-CN.zip",
            "https://github.com/subframe7536/maple-font/releases/download/v$version/MapleMonoNormalNL-NF-CN.zip"
        ]
    }
}
